<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>3D –ö–≤–∏–∑</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, sans-serif; }
    body { 
      min-height: 100vh; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      padding: 20px;
    }
    .app { 
      width: 100%; max-width: 600px; 
      background: rgba(255,255,255,0.95); 
      border-radius: 20px; 
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    .header { 
      padding: 20px; 
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white; 
      text-align: center;
    }
    .header h1 { font-size: 1.5rem; margin-bottom: 5px; }
    .header p { font-size: 0.9rem; opacity: 0.9; }
    .progress-section {
      padding: 20px;
      background: white;
      border-bottom: 1px solid #eee;
    }
    .progress-label { font-size: 0.85rem; color: #666; margin-bottom: 10px; }
    .score-bar {
      height: 12px; 
      background: #f0f0f0; 
      border-radius: 10px; 
      overflow: hidden;
      position: relative;
    }
    .score-fill {
      height: 100%; 
      width: 0%;
      background: linear-gradient(90deg, #ff4757, #ffa502, #2ed573);
      border-radius: 10px;
      transition: width 1s ease, background 1s ease;
      box-shadow: 0 0 20px rgba(0,255,0,0.5);
    }
    .question { 
      padding: 30px 20px; 
      min-height: 200px;
      display: flex; 
      flex-direction: column; 
      gap: 20px;
    }
    .question-num { 
      font-size: 0.8rem; 
      color: #666; 
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .question-text { 
      font-size: 1.3rem; 
      font-weight: 600; 
      line-height: 1.4;
    }
    .answers { display: flex; flex-direction: column; gap: 12px; }
    .answer-btn { 
      padding: 15px 20px; 
      border: 2px solid #ddd; 
      background: white;
      border-radius: 12px; 
      cursor: pointer; 
      font-size: 1rem;
      transition: all 0.3s ease;
      display: flex; align-items: center; gap: 15px;
    }
    .answer-letter {
      width: 30px; height: 30px; 
      border-radius: 50%; 
      border: 2px solid #ddd;
      display: flex; align-items: center; justify-content: center;
      font-weight: 600; font-size: 0.9rem;
    }
    .answer-btn:hover { 
      border-color: #4facfe; 
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(79,172,254,0.3);
    }
    .answer-btn.correct { 
      border-color: #2ed573; 
      background: #d4f4dd;
      box-shadow: 0 10px 25px rgba(46,213,115,0.4);
    }
    .answer-btn.wrong { 
      border-color: #ff4757; 
      background: #fadbd8;
      box-shadow: 0 10px 25px rgba(255,71,87,0.4);
    }
    .answer-btn.disabled { pointer-events: none; opacity: 0.7; }
    .footer { 
      padding: 20px; 
      display: flex; 
      justify-content: space-between; 
      align-items: center;
      background: #f8f9fa;
      border-top: 1px solid #eee;
    }
    .status { font-size: 0.9rem; color: #666; }
    .next-btn { 
      padding: 12px 30px; 
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white; 
      border: none; 
      border-radius: 25px;
      font-weight: 600; 
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    .next-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(79,172,254,0.5); }
    .overlay {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.8); 
      display: none; 
      align-items: center; 
      justify-content: center; 
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    .overlay.active { display: flex; }
    .overlay-card { 
      background: white; 
      border-radius: 20px; 
      padding: 40px; 
      max-width: 500px; 
      width: 90%;
      text-align: center;
      box-shadow: 0 30px 80px rgba(0,0,0,0.5);
    }
    .overlay h2 { font-size: 1.8rem; margin-bottom: 10px; color: #333; }
    .result-stats { display: flex; flex-direction: column; gap: 15px; margin: 30px 0; }
    .stat-row { display: flex; justify-content: space-between; font-size: 1.1rem; }
    .stat-value { font-weight: 700; color: #4facfe; }
    .final-bar { 
      height: 15px; margin: 20px 0; 
      background: #f0f0f0; border-radius: 10px; overflow: hidden;
    }
    .final-fill { 
      height: 100%; width: 0%; 
      background: linear-gradient(90deg, #ff4757, #ffa502, #2ed573);
      transition: width 1.5s ease;
      border-radius: 10px;
    }
    @media (max-width: 600px) {
      .app { margin: 10px; border-radius: 15px; }
      .question-text { font-size: 1.1rem; }
      .overlay-card { padding: 30px 20px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <h1 id="title">3D –ö–≤–∏–∑</h1>
      <p id="subtitle">–¢–µ—Å—Ç –ø–æ –æ—Å–Ω–æ–≤–∞–º 3D –≥—Ä–∞—Ñ–∏–∫–∏</p>
    </div>
    
    <div class="progress-section">
      <div class="progress-label">–ü—Ä–æ–≥—Ä–µ—Å—Å: <span id="progNum">0</span>/7</div>
      <div class="score-bar">
        <div class="score-fill" id="scoreBar"></div>
      </div>
      <div style="text-align:center; margin-top:10px; font-size:1.1rem; font-weight:600;" id="scoreText">0/7</div>
    </div>

    <div class="question">
      <div class="question-num" id="qNum">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 7</div>
      <div class="question-text" id="question">–ù–∞–∂–º–∏—Ç–µ –ü–£–°–ö —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</div>
      <div class="answers" id="answers"></div>
    </div>

    <div class="footer">
      <div class="status" id="status">–ì–æ—Ç–æ–≤ –∫ —Å—Ç–∞—Ä—Ç—É</div>
      <button class="next-btn" id="nextBtn">–ü–£–°–ö ‚û§</button>
    </div>
  </div>

  <div class="overlay active" id="startOverlay">
    <div class="overlay-card">
      <h2>üéÆ 3D –ö–≤–∏–∑</h2>
      <p style="color:#666; margin-bottom:30px;">7 –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –æ—Å–Ω–æ–≤–∞–º 3D –≥—Ä–∞—Ñ–∏–∫–∏</p>
      <button class="next-btn" id="startBtn" style="width:100%; padding:15px;">–ù–ê–ß–ê–¢–¨ ‚û§</button>
    </div>
  </div>

  <div class="overlay" id="endOverlay">
    <div class="overlay-card">
      <h2 id="endTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
      <div class="result-stats">
        <div class="stat-row">
          <span>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö:</span>
          <span class="stat-value" id="endCorrect">0</span>
        </div>
        <div class="stat-row">
          <span>–í—Å–µ–≥–æ:</span>
          <span class="stat-value">7</span>
        </div>
        <div class="stat-row">
          <span>–ü—Ä–æ—Ü–µ–Ω—Ç:</span>
          <span class="stat-value" id="endPercent">0%</span>
        </div>
      </div>
      <div class="final-bar">
        <div class="final-fill" id="finalBar"></div>
      </div>
      <div id="endComment" style="font-size:1.1rem; margin-top:20px; padding:20px; background:#f8f9fa; border-radius:12px;"></div>
      <button class="next-btn" id="restartBtn" style="width:100%; padding:15px; margin-top:30px;">–ò–ì–†–ê–¢–¨ –ï–©–Å ‚ü≥</button>
    </div>
  </div>

  <script>
    const QUESTIONS_PER_RUN = 7;
    const allQuestions = [
      { text: "–ö–∞–∫ –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –æ–±—ä—è—Å–Ω–∏—Ç—å, —á—Ç–æ —Ç–∞–∫–æ–µ 3D‚Äë–≥—Ä–∞—Ñ–∏–∫–∞?", options: ["–õ—é–±—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ", "–û–±—ä—ë–º–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å", "–¢–æ–ª—å–∫–æ –º–æ–±–∏–ª—å–Ω—ã–µ –∏–≥—Ä—ã"], correctIndex: 1 },
      { text: "–°–∫–æ–ª—å–∫–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π –µ—Å—Ç—å —É 3D‚Äë–æ–±—ä–µ–∫—Ç–∞?", options: ["–î–≤–∞: —à–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞", "–¢—Ä–∏: —à–∏—Ä–∏–Ω–∞, –≤—ã—Å–æ—Ç–∞ –∏ –≥–ª—É–±–∏–Ω–∞", "–ß–µ—Ç—ã—Ä–µ: –ø–ª—é—Å –≤—Ä–µ–º—è"], correctIndex: 1 },
      { text: "–ö–∞–∫ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±–µ 3D‚Äë–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ?", options: ["–ö–∞–∫ –ª–µ–ø–∫—É —Å–∫—É–ª—å–ø—Ç—É—Ä—ã, —Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ", "–ö–∞–∫ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∫–∞—Ä–∞–Ω–¥–∞—à–æ–º", "–ö–∞–∫ –º–æ–Ω—Ç–∞–∂ –≤–∏–¥–µ–æ"], correctIndex: 0 },
      { text: "–ì–¥–µ —Ç–æ—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 3D‚Äë–≥—Ä–∞—Ñ–∏–∫–∞?", options: ["–í –º—É–ª—å—Ç—Ñ–∏–ª—å–º–∞—Ö –∏ –∫–∏–Ω–æ —Å–æ —Å–ø–µ—Ü—ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏", "–í –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –∏–≥—Ä–∞—Ö", "–í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è—Ö –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏", "–í–æ –≤—Å–µ—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö"], correctIndex: 3 },
      { text: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç 3D‚Äë–æ–±—ä–µ–∫—Ç—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π?", options: ["3D‚Äë–º–æ–¥–µ–ª–ª–µ—Ä (3D‚Äë—Ö—É–¥–æ–∂–Ω–∏–∫)", "3D‚Äë—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ", "3D‚Äë–∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä"], correctIndex: 0 },
      { text: "–ö–∞–∫–æ–π –∏–∑ —ç—Ç–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ 3D‚Äë–º–æ–¥–µ–ª—å?", options: ["–ö—É–±, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∫—Ä—É—Ç–∏—Ç—å —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω", "–ü–ª–æ—Å–∫–∏–π —Ä–∏—Å—É–Ω–æ–∫ –∫—Ä—É–≥–∞", "–¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç"], correctIndex: 0 },
      { text: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è 3D‚Äë—Å—Ü–µ–Ω—ã –≤ –≥–æ—Ç–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–ª–∏ –∫–∞–¥—Ä –≤–∏–¥–µ–æ?", options: ["–†–µ–Ω–¥–µ—Ä (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥)", "–ü–µ—á–∞—Ç—å", "–°–∫—Ä–æ–ª–ª–∏–Ω–≥"], correctIndex: 0 }
    ];

    let selectedQuestions = [], currentIndex = 0, score = 0, answered = false, quizStarted = false;

    const els = {
      question: document.getElementById('question'),
      answers: document.getElementById('answers'),
      qNum: document.getElementById('qNum'),
      progNum: document.getElementById('progNum'),
      scoreBar: document.getElementById('scoreBar'),
      scoreText: document.getElementById('scoreText'),
      status: document.getElementById('status'),
      nextBtn: document.getElementById('nextBtn'),
      startOverlay: document.getElementById('startOverlay'),
      endOverlay: document.getElementById('endOverlay'),
      endCorrect: document.getElementById('endCorrect'),
      endPercent: document.getElementById('endPercent'),
      finalBar: document.getElementById('finalBar'),
      endComment: document.getElementById('endComment'),
      startBtn: document.getElementById('startBtn'),
      restartBtn: document.getElementById('restartBtn')
    };

    function pickQuestions() {
      const indices = allQuestions.map((_, i) => i).sort(() => Math.random() - 0.5).slice(0, QUESTIONS_PER_RUN);
      selectedQuestions = indices.map(i => ({...allQuestions[i]}));
    }

    function renderQuestion() {
      const q = selectedQuestions[currentIndex];
      answered = false;
      els.question.textContent = q.text;
      els.qNum.textContent = `–í–æ–ø—Ä–æ—Å ${currentIndex + 1} –∏–∑ ${QUESTIONS_PER_RUN}`;
      els.progNum.textContent = currentIndex + 1;
      els.scoreText.textContent = `${score}/${QUESTIONS_PER_RUN}`;
      
      const progress = ((currentIndex / QUESTIONS_PER_RUN) * 100);
      els.scoreBar.style.width = `${progress}%`;
      
      els.answers.innerHTML = '';
      const letters = 'ABCDE'.split('');
      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.innerHTML = `<div class="answer-letter">${letters[i]}</div><span>${opt}</span>`;
        btn.onclick = () => handleAnswer(i, btn);
        els.answers.appendChild(btn);
      });
      
      els.status.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç';
      els.nextBtn.textContent = currentIndex === QUESTIONS_PER_RUN - 1 ? '–†–ï–ó–£–õ–¨–¢–ê–¢' : '–î–ê–õ–ï–ï ‚û§';
    }

    function handleAnswer(selected, btn) {
      if (!quizStarted || answered) return;
      answered = true;
      
      const q = selectedQuestions[currentIndex];
      const buttons = els.answers.querySelectorAll('.answer-btn');
      
      buttons.forEach((b, i) => {
        b.classList.add('disabled');
        if (i === q.correctIndex) b.classList.add('correct');
      });
      
      if (selected === q.correctIndex) {
        score++;
        btn.classList.add('correct');
        els.status.textContent = '‚úÖ –í–µ—Ä–Ω–æ!';
      } else {
        btn.classList.add('wrong');
        els.status.textContent = '‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–¥—Å–≤–µ—á–µ–Ω';
      }
      
      els.scoreText.textContent = `${score}/${QUESTIONS_PER_RUN}`;
      els.scoreBar.style.width = `${(currentIndex + 1) / QUESTIONS_PER_RUN * 100}%`;
    }

    function showResults() {
      const percent = Math.round(score / QUESTIONS_PER_RUN * 100);
      els.endCorrect.textContent = score;
      els.endPercent.textContent = `${percent}%`;
      els.finalBar.style.width = `${percent}%`;
      
      let comment = '';
      if (percent >= 85) comment = 'üéâ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢—ã –≥–æ—Ç–æ–≤ –∫ 3D!';
      else if (percent >= 60) comment = 'üëç –•–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç! –ü—Ä–æ–¥–æ–ª–∂–∞–π –∏–∑—É—á–∞—Ç—å 3D.';
      else if (percent >= 30) comment = 'üìö –ë–∞–∑–∞ –µ—Å—Ç—å! –ü–æ—Ä–∞ —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ —Ç–µ–º—É.';
      else comment = 'üöÄ –ù–∞—á–∞–ª–æ –ø–æ–ª–æ–∂–µ–Ω–æ! 3D –∂–¥—ë—Ç —Ç–µ–±—è!';
      
      els.endComment.textContent = comment;
      els.endOverlay.classList.add('active');
    }

    function startQuiz() {
      pickQuestions();
      currentIndex = 0;
      score = 0;
      quizStarted = true;
      els.startOverlay.classList.remove('active');
      els.endOverlay.classList.remove('active');
      renderQuestion();
    }

    els.nextBtn.onclick = () => {
      if (!quizStarted) return startQuiz();
      if (!answered) return;
      if (currentIndex < QUESTIONS_PER_RUN - 1) {
        currentIndex++;
        renderQuestion();
      } else {
        showResults();
      }
    };
    
    els.startBtn.onclick = startQuiz;
    els.restartBtn.onclick = startQuiz;
  </script>
</body>
</html>
